{% extends 'base.html' %}
{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}

<div class="profile-page">

    <!-- –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å: –∫–∞–≤–µ—Ä –∏ –∞–≤–∞—Ç–∞—Ä -->
    <div class="profile-header" style="text-align: center; position: relative;">
        {% if user.cover %}
            <img src="{{ user.cover.url }}" style="width: 100%; max-height: 300px; object-fit: cover;">
        {% else %}
            <div style="width: 100%; height: 300px; background-color: #ccc;"></div>
        {% endif %}
        
        <img src="{{ user.avatar.url }}" 
             style="width: 120px; height: 120px; border-radius: 50%; margin-top: -60px; border: 4px solid white; background: white;">
        
        <h2 style="margin-top: 10px;">{{ user.username }}</h2>
        
        <p>üë• –ü–æ–¥–ø–∏—Å—á–∏–∫–∏: {{ user.followers.count }} | ‚û°Ô∏è –ü–æ–¥–ø–∏—Å–∫–∏: {{ user.following.count }}</p>
        
        <a href="{% url 'edit_profile' %}" class="profile-button">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
        <a href="{% url 'create_post' %}" class="profile-button">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–Ω—Ñ–∏–∫</a>
    </div>

    <!-- –ë–∏–æ –∏ Email -->
    <div class="profile-info" style="text-align: center; margin-top: 20px;">
        {% if user.bio %}
            <p><strong>–û —Å–µ–±–µ:</strong> {{ user.bio }}</p>
        {% endif %}
        <p><strong>Email:</strong> {{ user.email }}</p>
    </div>

    <hr style="margin: 30px 0;">

    <!-- –§–∞–Ω—Ñ–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <h3 style="text-align: center;">üìö –ú–æ–∏ —Ñ–∞–Ω—Ñ–∏–∫–∏:</h3>
    <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px;">
        {% for post in posts %}
            <div style="width: 300px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                {% if post.image %}
                    <img src="{{ post.image.url }}" style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px;">
                {% endif %}
                <h4 style="margin-top: 15px;">{{ post.title }}</h4>
                <p>{{ post.content|truncatewords:20 }}</p>
                <small style="color: gray;">{{ post.created_at|date:"d M Y" }}</small>
            </div>
        {% empty %}
            <p style="text-align: center;">–í—ã –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ —Ñ–∞–Ω—Ñ–∏–∫–∏.</p>
        {% endfor %}
    </div>

    <hr style="margin: 30px 0;">

    <!-- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã -->
    <h3 style="text-align: center;">üåü –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã:</h3>
    <ul style="list-style: none; padding: 0; text-align: center;">
        {% for fav_post in user.favorite_posts.all %}
            <li style="margin: 10px 0;">
                <a href="{% url 'post_detail' pk=fav_post.pk %}" style="text-decoration: none; color: #3498db;">
                    {{ fav_post.title }}
                </a>
            </li>
        {% empty %}
            <p style="text-align: center;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.</p>
        {% endfor %}
    </ul>

</div>

{% endblock %}
